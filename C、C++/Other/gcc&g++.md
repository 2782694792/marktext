## gcc 和 g++ 的区别

在已编译好的 C 或者 C++ 代码的前提下，GCC 编译器已提供了调用接口，可以通过执行 gcc 或者 g++ 指令来调用 GCC 编译器，两者都可以编译 C 或者 C++ 语言程序，但这不是两者的区别。

实际上只要是 GCC 支持编译的程序代码，都可以使用 gcc 命令完成编译，可以说 gcc 是 GCC 编译器的通用编译指令，因为 gcc 指令根据程序文件的后缀名可以执行判断出当前程序所用编程语言的类别：

- xxx.c：默认以编译 C 语言程序的方式编译此文件；
- xxx.cpp：默认以编译 C++ 语言程序的方式编译此文件；
- xxx.m：默认以编译 Objective-C 语言程序的方式编译此文件；
- xxx.go：默认以编译 Go 语言程序的方式编译此文件；

gcc 指令对 .c 文件则以 C 语言代码对待，对 .cpp 文件则以 C++ 代码对待；

g++ 指令对.c 或者 .cpp 文件则都以 C++ 代码对待。

gcc 指令编译执行 C++ 程序，需要添加命令使得链接必要的 C++ 标准库：

> [root@bogon ~]# gcc -xc++ demo.cpp -lstdc++ -shared-libgcc 

## 命名倾轧（函数重载及原理）

函数重载：**C 语言中一个函数不能与另一个函数重名**；C++ 中只要函数的参数列表与另一函数的参数列表不完全相同，函数名就可以相同。

重载原则：

1. 函数名相同，函数参数列表不同（类型、个数、顺序）；
2. 匹配原则1：严格匹配，找到再调用；
3. 匹配原则2：通过隐式类型转换寻求一个匹配，找到再调用；
4. 返回值类型不构成重载条件。

**重载实现原理**：利用 name mangling（倾轧）技术对函数名进行更改，区分参数不同的同名函数。

​    编译器通过函数名和参数类型识别重载函数。为了保证类型安全的连接（type-safe linkage），编译器用参数个数和参数类型对每一个函数标识符进行专门编码（名字改编：name mangling 或者 名字修饰：name decoration）。

​    类型安全的连接使得程序能够调用合适的重载函数并保证了参数传递的一致性，编译器能够检查到并报告连接错误。

**查看符号表：**

1. nm 目标文件；
2. objdump -t 目标文件；
3. readelf -s 目标文件
4. strings 目标文件

**GCC 自动识别的文件扩展名：**

| 文件名称 + 扩展名                                                                                            | GCC 编译器识别的类型                    |
|:-----------------------------------------------------------------------------------------------------:|:-------------------------------:|
| file .c                                                                                               | 尚未经过预处理的C 源程序文件                 |
| file.j                                                                                                | 经过预处理操作，但未进行编译、汇编和连接的 C 源代码文件   |
| file.cpp<br />file.cp<br />file.cc<br />file.cxx<br />file.CPP<br />file.c++<br />file.C              | 尚未经过预处理操作的 C++ 源代码文件            |
| file.ii                                                                                               | 经过预处理操作，但未进行编译、汇编和连接的 C++ 源代码文件 |
| file.s                                                                                                | 经过编译生成的汇编代码文件                   |
| file.h                                                                                                | C、C++或者 Objective-C++ 语言头文件     |
| file.h<br/>hfile.H<br />file.hp<br />file.hxx<br />file.hpp<br />file.HPP<br />file.h++<br />file.tcc | C++ 头文件                         |