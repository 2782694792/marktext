# 静态控件 CStatic

## 属性

| No prefix | 不将控件文本中的“&”符解释为助记字符。在默认情况下， “&”符号在显示时会被去掉，取而代之的是紧接“&”符之后的字符被以加下划线的格式进行显示。 |
| --------- | ------------------------------------------------------------------------- |
| No wrap   | 以左对齐的方式来显示文本，并且不进行文本的自动回行。超出控件右边界的文本将被裁去。                                 |
| Simple    | 禁止设置 Text Align 属性和 No Wrap 样式，属性为真时，静态文本不会被自动回行，也不会被剪裁。默认 false。         |
| Notify    | 决定控件在被单击时是否通知父窗口。默认 false。                                                |

## 消息处理

- 窗口类的定义出添加如下命令**处理函数**声明：

```cpp
afx_msg void OnStaticDemo();
```

- 添加**消息映射**入口（在 `BEGIN_MESSAGE_MAP(CStaticDemoDlg, CDialog)`）：

```cpp
ON_BN_CLICKED(IDC_STATICDEMO, OnStaticDemo)
```

- 添加**成员函数**（`OnStaticDemo`）：

```cpp
void CStaticDemoDlg::OnStaticDemo()
{        
    MessageBox("静态控件！");
}
```

## 图标文本

```cpp
// 获得指向静态控件的指针
CStatic *pStaticDemo=(CStatic*)GetDlgItem(IDC_STATICDEMO);
// 加载图标
HICON hIcon=AfxGetApp()->LoadIcon(IDR_MAINFRAME);
// 设置静态控件的样式以使得可以使用图标，并使图标显示时居中
pStaticDemo->ModifyStyle(0xF,SS_ICON|SS_CENTERIMAGE);
// 设置静态控件图标
pStaticDemo->SetIcon(hIcon);
```

## 位图文本

```cpp
// 获得指向静态控件的指针
CStatic *pStaticDemo=(CStatic*)GetDlgItem(IDC_STATICDEMO);
// 获得位图句柄
HBITMAP hBitmap=::LoadBitmap(AfxGetApp()->m_hInstance,
MAKEINTRESOURCE(IDB_STATICDEMO));
// 设置静态控件的样式以使得可以使用位图，并使位图在显示时居中
pStaticDemo->ModifyStyle(0xF,SS_BITMAP|SS_CENTERIMAGE);
// 设置静态控件显示时使用的位图
pStaticDemo->SetBitmap(hBitmap);
```

# 文本编辑控件 CEdit

## 属性

| Auto HScroll                                                              | 如果插入点超过了控件的右边界，多行文本编辑控件自动进行水平滚动。用户可以使用 ENTER 键来开始新行。         |
| ------------------------------------------------------------------------- | ------------------------------------------------------------ |
| Want return                                                               | 属性为真时，用户才可以使用 ENTER 键来开始新行。                                  |
| Number                                                                    | 用户不能输入非数字字符。默认 false。                                        |
| Auto VScroll                                                              | 在多行控件中，当用户在最后一行按下 ENTER 键时自动向上滚动文本                           |
| OEM convert                                                               | 将键入的文本从 Windows 字符集转换为 OEM 字符集，再转换回 Windows 字符集。该操作确认应用程序在调用 |
| **AnsiToOem** 函数将编辑框中的字符串转换为 OEM 字符串时进行正确的字符转换，因此该样式对于包括**文件名的编辑控件**特别有用。 |                                                              |

## 成员函数

| SetSel          | 设置编辑控件中所选定的字符范围           |
| --------------- | ------------------------- |
| Undo            | 撤销最后一次编辑操作                |
| CanUndo         | 决定编辑控件的操作是否可以被撤销          |
| EmptyUndoBuffer | 重置编辑控件的 undo 标志           |
| GetModify       | 判断编辑控件中的内容是否被修改过          |
| SetModify       | 设置或清除编辑控件中的修改标志           |
| GetPasswordChar | 当用户输入文本时获得编辑控件中显示的密码字符    |
| SetPasswordChar | 设置或移去当用户输入文本时编辑控件中显示的密码字符 |
| LineFromChar    | 获得包含指定索引字符的行的行号           |
| FmtLines        | 在多行编辑控件中设置是否包含软换行符的开关     |
| SetTabStops     | 在多行编辑控件中设置制表位             |
| CharFromPos     | 获得最接近于指定位图的行和字符的索引        |
| PosFromChar     | 获得指定字符索引的左上角的坐标           |

## 消息

- ON_EN_CHANGE ：编辑控件不能按选定需要分配足够的内存；

- ON_EN_HSCROLL ：用户单击了编辑控件中的水平滚动条。父窗口在屏幕更新前获得此消息；

- ON_EN_KILLFOCUS ：编辑控件失去输入焦点；

- ON_EN_MAXTEXT ：当前插入内容超过了编辑控件中的指定的字符数，该插入内容已被裁剪。如果控件没有设置 ES_AUTOHSCROLL 样式，那么在插入的字符超出了编辑控件的宽度也发送该通知消息。同样，如果控件没有指定 ES_AUTOVSCROLL 样式，该通知也以插入操作导致总行数超过编辑控件的高度时发送；

- ON_EN_SETFOCUS ：编辑按钮获得输入焦点；

- ON_EN_UPDATE ：控件已对文本作了格式化，但尚未显示文本。通常可以处理该消息以决定是否需要对窗口的大小作改变等；

- ON_EN_VSCROLL ：用户单击了编辑控件的垂直滚动条。父窗口在屏幕更新前收到该消息。

## 菜单资源 IDR_MAINMENU

- 该菜单资源包括两个顶层菜单项“文件(&F)”和“编辑(&E)”；

- “文件(&F)”：包括新建 ID_FILE_NEW 和退出 ID_FILE_EXIT；

- “编辑(&E)” ：包括（命令的资源 ID）撤销 ID_EDIT_UNDO、剪切 ID_EDIT_CUT、复制 ID_EDIT_COPY、粘贴 ID_EDIT_PASTE、删除 ID_EDIT_DEL、全选 ID_EDIT_SELECTALL 和设置字体 ID_EDIT_SETFONT。

### 新建

```cpp
void CEditDemoDlg::OnFileNew()
{
    // 将编辑控件中的文本初始化为零，并清除其撤消缓冲区。
    CEdit *pEdit=(CEdit*)GetDlgItem(IDC_EDIT);
    pEdit->SetWindowText("");
    pEdit->EmptyUndoBuffer();
}
```

### 退出

```cpp
void CEditDemoDlg::OnFileExit()
{    
    // 调用基类成员函数 OnCancel 终止对话框
    OnCancel();
}
```

# 编辑框控件 EDIT

1. 多行文本，自动换行
   
   `设置 Multiline 属性，清除 Auto HScroll 属性`
